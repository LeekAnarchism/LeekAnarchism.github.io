<!DOCTYPE html>
<html>
<head>
	
	<title>Mobile tutorial - Leaflet</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js" integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q==" crossorigin=""></script>


	<style>

		#map {
			position: absolute;
		}
		#location {
			position: absolute;
			color: yellow;
		}
		#position_marker {
		    border-radius: 50%;
		    width: 50px;
		    height: 50px;
		    background: lightblue;
		    border: 3px solid #000;
		    position: absolute;
		}
		body { padding: 0; margin: 0; }
	</style>
</head>
<body>

<img id='map' src="basicmaze.png" />
<div id='location'></div>
<div id='position_marker'></div>

<script>
const topleft = [51.5560, -0.161];
const bottomright = [51.5540, -0.159];

function geo_success(position) {
  console.log("updated pos")
  drawpos(position.coords.latitude, position.coords.longitude);
}

function drawpos(lat, long) {
	const x = (topleft[0] - lat) / (topleft[0] - bottomright[0])
	const y = (topleft[1] - long) / (topleft[1] - bottomright[1])
	document.getElementById("location").innerText = `Lat: ${lat}, long: ${long}
	x: ${x}, y: ${y}
	`;
	const pos = document.getElementById('position_marker');
	const map = document.getElementById('map');

	pos.style.left = (x * map.width) + 'px';
	pos.style.top = (y * map.height) + 'px';
}

function geo_error() {
  alert("Sorry, no position available.");
}

var geo_options = {
  enableHighAccuracy: true, 
  maximumAge        : 30000, 
  timeout           : 27000
};

var wpid = navigator.geolocation.watchPosition(geo_success, geo_error, geo_options);
</script>

</body>
</html>
